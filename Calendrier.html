<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VUC Omnisports</title>
    <link rel="stylesheet" href="calendrier.css">
    <link rel="stylesheet" href="nav.css" >
    <link rel="stylesheet" href="footer.css" >
    <link href='https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css' rel='stylesheet' />
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js'></script>
    <script src='https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js'></script>
</head>
<body>
<header>
    <img src="Logo VUC/OMNISPORT.png" alt="Logo VUC" style="height: 60px; vertical-align: middle; margin-right: 16px;">
    <h1 style="display: inline-block; vertical-align: middle;">Valenciennes Université Club</h1>
    <nav>
        <ul>
            <li><a href="acceuil.html">Accueil</a></li>
            <li><a href="activite.html">Les activités</a></li>
            <li><a href="news.html">Actualités</a></li>
            <li><a href="inscription.html">Inscription</a></li>
            <li><a href="calendrier.html">Calendrier</a></li>
        </ul>
    </nav>
</header>

<div id='calendar'></div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        var calendarEl = document.getElementById('calendar');

        // Définir des couleurs pour chaque sport
        const sportColors = {
            'Aviron': '#ade4e6',        // Bleu clair pour Aviron
            'Badminton': '#FFD700',     // Jaune pour Badminton
            'Canoe Kayak': '#00CED1',   // Turquoise pour Canoë-Kayak
            'Cross Training': '#32CD32',// Vert lime pour Cross Training
            'Escalade': '#8B4513',      // Marron pour Escalade
            'Gymnastique': '#FF69B4',   // Rose vif pour Gymnastique
            'Judo': '#ea0505',          // Rouge pour Judo
            'Paintball': '#800080',     // Violet pour Paintball
            'Qi Gong': '#FFD700',       // Jaune pour Qi Gong
            'Sports Nature': '#228B22', // Vert forêt pour Sports Nature
            'Tir à l arc': '#1E90FF'    // Bleu Dodger pour Tir à l'Arc
        };

        // Récupérer les événements depuis l'API
        axios.get('https://sheetdb.io/api/v1/0rgw6vbnghtsk')
            .then(function(response) {
                const events = response.data.map(item => ({
                    title: item.Nom,
                    start: item.Date,
                    description: item.Description,
                    location: item.Lieu,
                    eventColor: sportColors[item.Sport] || '#000000'  // Applique la couleur du sport
                }));

                var calendar = new FullCalendar.Calendar(calendarEl, {
                    initialView: 'dayGridMonth', // Vue par défaut (mois)
                    events: events,  // Charge les événements
                    headerToolbar: {
                        left: 'prev,next today', // Boutons de navigation
                        center: 'title',         // Titre du mois
                        right: 'dayGridMonth,dayGridWeek,dayGridDay' // Choix de la vue : mois, semaine, jour
                    },
                    eventClick: function(info) {
                        // Afficher les détails de l'événement dans une alerte ou modal
                        alert("Titre: " + info.event.title + "\nDescription: " + info.event.extendedProps.description + "\nLieu: " + info.event.extendedProps.location);
                    },
                    eventContent: function(info) {
                        console.log('Event Content:', info.event.extendedProps);  // Vérifie les propriétés de l'événement
                        // Applique la couleur du sport sur l'événement
                        var element = document.createElement('div');
                        element.style.backgroundColor = info.event.extendedProps.eventColor;
                        element.innerHTML = info.event.title;
                        return { domNodes: [element] };
                    }

                });

                // Rendre le calendrier sur la page
                calendar.render();
            })
            .catch(function(error) {
                console.error('Erreur lors du chargement des événements', error);
            });
    });
</script>
</body>
<footer class="section-footer">
    <p>Suivez-nous :</p>
    <div class="social-icons">
        <a href="#"><img src="https://cdn-icons-png.flaticon.com/512/733/733547.png" alt="Facebook"></a>
        <a href="#"><img src="https://cdn-icons-png.flaticon.com/512/2111/2111463.png" alt="Instagram"></a>
        <a href="#"><img src="https://cdn-icons-png.flaticon.com/512/3046/3046122.png" alt="TikTok"></a>
    </div>
</footer>
</html>